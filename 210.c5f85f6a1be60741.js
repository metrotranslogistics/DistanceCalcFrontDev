"use strict";(self.webpackChunkDistanceCalcFront=self.webpackChunkDistanceCalcFront||[]).push([[210],{5210:(G,v,o)=>{o.r(v),o.d(v,{IntervalConfigModule:()=>O});var a=o(4719),f=o(6895),s=o(5146),c=o(7224),t=o(5062),p=o(9429);function h(n,i){1&n&&t._UZ(0,"span",10)}let C=(()=>{class n{constructor(e,r,l,u,V){this.formBuilder=e,this.route=r,this.router=l,this.alertService=u,this.intervalConfigService=V,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({locDateInterval:["",a.kI.required],expireDateInterval:["",a.kI.required]}),this.intervalConfigService.getAll().pipe((0,c.P)()).subscribe(e=>{this.f.locDateInterval.setValue(e[0].locDateInterval),this.f.expireDateInterval.setValue(e[0].expireDateInterval)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.updateIntervalConfig())}updateIntervalConfig(){this.intervalConfigService.update(this.form.value).pipe((0,c.P)()).subscribe(e=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(s.gz),t.Y36(s.F0),t.Y36(p.c9),t.Y36(p.cY))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:18,vars:3,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","locDateInterval"],["type","text","formControlName","locDateInterval",1,"form-control"],["for","expireDateInterval"],["type","text","formControlName","expireDateInterval",1,"form-control"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/intervalconfig",1,"btn","btn-link"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,r){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Edit Config"),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(3,"div",1)(4,"div",2)(5,"label",3),t._uU(6,"Location Date Interval"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"div",2)(9,"label",5),t._uU(10,"Expire Date Interval"),t.qZA(),t._UZ(11,"input",6),t.qZA()(),t.TgZ(12,"div",1)(13,"button",7),t.YNc(14,h,1,0,"span",8),t._uU(15," Save "),t.qZA(),t.TgZ(16,"a",9),t._uU(17,"Cancel"),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",r.form),t.xp6(11),t.Q6J("disabled",r.loading),t.xp6(1),t.Q6J("ngIf",r.loading))},dependencies:[f.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,s.yS],encapsulation:2}),n})(),I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-1"],[1,"container"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"router-outlet"),t.qZA()())},dependencies:[s.lC],encapsulation:2}),n})();var m=o(805),d=o(793);const Z=["dt"];function A(n,i){1&n&&(t.TgZ(0,"tr")(1,"th",5)(2,"table")(3,"tr"),t._uU(4,"Expire Date Interval"),t.qZA()()(),t.TgZ(5,"th",6)(6,"table")(7,"tr"),t._uU(8,"Location Date Interval"),t.qZA()()()())}function b(n,i){if(1&n&&(t.TgZ(0,"tr",7)(1,"td")(2,"table")(3,"tr",8),t._uU(4),t.qZA()()(),t.TgZ(5,"td")(6,"table")(7,"tr",8),t._uU(8),t.qZA()()()()),2&n){const e=i.$implicit;t.Q6J("pSelectableRow",e),t.xp6(4),t.Oqu(e.expireDateInterval),t.xp6(4),t.Oqu(e.locDateInterval)}}let g=(()=>{class n{constructor(e,r,l){this.intervalConfigService=e,this.messageService=r,this.accountService=l,this.userName="",this.userRole=""}ngOnInit(){this.intervalConfigService.getAll().pipe((0,c.P)()).subscribe(e=>this.intervalconfig=e),this.accountService.getById(this.accountService.userValue.id).pipe((0,c.P)()).subscribe(e=>{this.userRole=e.role,this.userName=e.firstName})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.cY),t.Y36(m.ez),t.Y36(p.BR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,r){if(1&e&&t.Gf(Z,5),2&e){let l;t.iGM(l=t.CRH())&&(r.table=l.first)}},features:[t._Bn([m.ez])],decls:6,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],["selectionMode","single","dataKey","id",1,"table","table-striped","table-hover",3,"value","selection","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],[2,"width","25%"],[2,"width","30%"],[3,"pSelectableRow"],[2,"color","red"]],template:function(e,r){1&e&&(t.TgZ(0,"a",0),t._uU(1,"Edit Config"),t.qZA(),t.TgZ(2,"p-table",1,2),t.NdJ("selectionChange",function(u){return r.selectedIntervalConfig=u}),t.YNc(4,A,9,0,"ng-template",3),t.YNc(5,b,9,3,"ng-template",4),t.qZA()),2&e&&(t.xp6(2),t.Q6J("value",r.intervalconfig)("selection",r.selectedIntervalConfig))},dependencies:[s.yS,d.iA,m.jx,d.Ei],encapsulation:2}),n})();const S=[{path:"",component:I,children:[{path:"",component:g},{path:"add",component:C},{path:"intervalconfig",component:g}]}];let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.Bz.forChild(S),s.Bz]}),n})();var y=o(9483),D=o(9549),L=o(4144),U=o(3238),J=o(6308),x=o(5415),Y=o(666),E=o(2453),N=o(585),F=o(8177),M=o(5722),R=o(4076),B=o(1493),Q=o(5593),z=o(8235),X=o(1740),j=o(1383);let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.ez,a.UX,T,y.FA,D.lN,L.c,U.XK,J.JX,x.T,d.U$,Y.kW,E.EV,N._8,F.JH,M.q4,R.vI,B.S,Q.hJ,z.q,X.j,a.u5,j.V]}),n})()}}]);