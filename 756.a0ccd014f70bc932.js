"use strict";(self.webpackChunkDistanceCalcFront=self.webpackChunkDistanceCalcFront||[]).push([[756],{9756:(K,g,o)=>{o.r(g),o.d(g,{UsersModule:()=>D});var s=o(4719),l=o(6895),d=o(5146),e=o(5062);let Z=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[d.lC],encapsulation:2}),t})();var p=o(7224),c=o(9429);function v(t,n){1&t&&e._UZ(0,"span",10)}function h(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1,"Delete"),e.qZA())}function A(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",6)(12,"a",7),e._uU(13,"Edit"),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){const m=e.CHM(i).$implicit,f=e.oxw();return e.KtG(f.deleteUser(m.id))}),e.YNc(15,v,1,0,"span",9),e.YNc(16,h,2,0,"span",5),e.qZA()()()}if(2&t){const i=n.$implicit;e.xp6(2),e.Oqu(i.firstName),e.xp6(2),e.Oqu(i.lastName),e.xp6(2),e.Oqu(i.username),e.xp6(2),e.Oqu(i.role),e.xp6(2),e.Oqu(i.ip),e.xp6(2),e.MGl("routerLink","edit/",i.id,""),e.xp6(2),e.Q6J("disabled",i.isDeleting),e.xp6(1),e.Q6J("ngIf",i.isDeleting),e.xp6(1),e.Q6J("ngIf",!i.isDeleting)}}function q(t,n){1&t&&(e.TgZ(0,"tr")(1,"td",11),e._UZ(2,"span",12),e.qZA()())}let T=(()=>{class t{constructor(i){this.accountService=i,this.users=null}ngOnInit(){this.accountService.getAll().pipe((0,p.P)()).subscribe(i=>this.users=i)}deleteUser(i){this.users.find(u=>u.id===i).isDeleting=!0,this.accountService.delete(i).pipe((0,p.P)()).subscribe(()=>{this.users=this.users.filter(u=>u.id!==i)})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(c.BR))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:21,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-info","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(i,r){1&i&&(e.TgZ(0,"h1"),e._uU(1,"Users"),e.qZA(),e.TgZ(2,"a",0),e._uU(3,"Add User"),e.qZA(),e.TgZ(4,"table",1)(5,"thead")(6,"tr")(7,"th",2),e._uU(8,"First Name"),e.qZA(),e.TgZ(9,"th",2),e._uU(10,"Last Name"),e.qZA(),e.TgZ(11,"th",2),e._uU(12,"Username"),e.qZA(),e.TgZ(13,"th",2),e._uU(14,"Role"),e.qZA(),e.TgZ(15,"th",2),e._uU(16,"Ip"),e.qZA(),e._UZ(17,"th",3),e.qZA()(),e.TgZ(18,"tbody"),e.YNc(19,A,17,9,"tr",4),e.YNc(20,q,3,0,"tr",5),e.qZA()()),2&i&&(e.xp6(19),e.Q6J("ngForOf",r.users),e.xp6(1),e.Q6J("ngIf",!r.users))},dependencies:[l.sg,l.O5,d.yS],encapsulation:2}),t})();function b(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Add User"),e.qZA())}function U(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Edit User"),e.qZA())}function C(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"First Name is required"),e.qZA())}function N(t,n){if(1&t&&(e.TgZ(0,"div",21),e.YNc(1,C,2,0,"div",0),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.firstName.errors.required)}}function x(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Last Name is required"),e.qZA())}function I(t,n){if(1&t&&(e.TgZ(0,"div",21),e.YNc(1,x,2,0,"div",0),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.lastName.errors.required)}}function J(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Username is required"),e.qZA())}function Q(t,n){if(1&t&&(e.TgZ(0,"div",21),e.YNc(1,J,2,0,"div",0),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.username.errors.required)}}function Y(t,n){1&t&&(e.TgZ(0,"em"),e._uU(1,"(Leave blank to keep the same password)"),e.qZA())}function E(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function w(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 6 characters"),e.qZA())}function y(t,n){if(1&t&&(e.TgZ(0,"div",21),e.YNc(1,E,2,0,"div",0),e.YNc(2,w,2,0,"div",0),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",i.f.password.errors.minlength)}}function S(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Ip is required"),e.qZA())}function L(t,n){if(1&t&&(e.TgZ(0,"div",21),e.YNc(1,S,2,0,"div",0),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.ip.errors.required)}}const a=function(t){return{"is-invalid":t}};function k(t,n){if(1&t&&(e.TgZ(0,"select",22)(1,"option",23),e._uU(2,"Dispatcher"),e.qZA(),e.TgZ(3,"option",24),e._uU(4,"Operation"),e.qZA(),e.TgZ(5,"option",25),e._uU(6,"HR"),e.qZA(),e.TgZ(7,"option",26),e._uU(8,"Admin"),e.qZA(),e.TgZ(9,"option",27),e._uU(10,"Director"),e.qZA()()),2&t){const i=e.oxw();e.Q6J("ngClass",e.VKq(1,a,i.submitted&&i.f.role.errors))}}function F(t,n){if(1&t&&(e.TgZ(0,"select",22)(1,"option",23),e._uU(2,"Dispatcher"),e.qZA(),e.TgZ(3,"option",24),e._uU(4,"Operation"),e.qZA(),e.TgZ(5,"option",25),e._uU(6,"HR"),e.qZA()()),2&t){const i=e.oxw();e.Q6J("ngClass",e.VKq(1,a,i.submitted&&i.f.role.errors))}}function M(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Role is required"),e.qZA())}function R(t,n){if(1&t&&(e.TgZ(0,"div",21),e.YNc(1,M,2,0,"div",0),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.role.errors.required)}}function V(t,n){1&t&&e._UZ(0,"span",28)}let _=(()=>{class t{constructor(i,r,u,m,f){this.formBuilder=i,this.route=r,this.router=u,this.accountService=m,this.alertService=f,this.loading=!1,this.submitted=!1,this.userRole=""}ngOnInit(){this.accountService.getById(this.accountService.userValue.id).pipe((0,p.P)()).subscribe(r=>{this.userRole=r.role}),this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const i=[s.kI.minLength(6)];this.isAddMode&&i.push(s.kI.required),this.form=this.formBuilder.group({firstName:["",s.kI.required],lastName:["",s.kI.required],username:["",s.kI.required],password:["",i],role:["",s.kI.required],ip:["",s.kI.required]}),this.isAddMode||this.accountService.getById(this.id).pipe((0,p.P)()).subscribe(r=>{this.f.firstName.setValue(r.firstName),this.f.lastName.setValue(r.lastName),this.f.username.setValue(r.username),this.f.role.setValue(r.role),this.f.ip.setValue(r.ip)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.register(this.form.value).pipe((0,p.P)()).subscribe(i=>{this.alertService.success("User added successfully",{keepAfterRouteChange:!0}),this.router.navigate([".",{relativeTo:this.route}])},i=>{this.alertService.error(i),this.loading=!1})}updateUser(){alert(this.form.value.ip),this.accountService.update(this.id,this.form.value).pipe((0,p.P)()).subscribe(i=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},i=>{this.alertService.error(i),this.loading=!1})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(s.qu),e.Y36(d.gz),e.Y36(d.F0),e.Y36(c.BR),e.Y36(c.c9))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:45,vars:29,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","firstName"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","lastName"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["for","username"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["for","ip"],["type","text","formControlName","ip",1,"form-control",3,"ngClass"],["for","role"],[3,"ngIf"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],[1,"invalid-feedback"],["formControlName","role",1,"form-control",3,"ngClass"],["value","dispatcher"],["value","operation"],["value","hr"],["value","admin"],["value","director"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(i,r){1&i&&(e.YNc(0,b,2,0,"h1",0),e.YNc(1,U,2,0,"h1",0),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"div",2)(4,"div",3)(5,"label",4),e._uU(6,"First Name"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,N,2,1,"div",6),e.qZA(),e.TgZ(9,"div",3)(10,"label",7),e._uU(11,"Last Name"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,I,2,1,"div",6),e.qZA()(),e.TgZ(14,"div",2)(15,"div",3)(16,"label",9),e._uU(17,"Username"),e.qZA(),e._UZ(18,"input",10),e.YNc(19,Q,2,1,"div",6),e.qZA(),e.TgZ(20,"div",3)(21,"label",11),e._uU(22," Password "),e.YNc(23,Y,2,0,"em",0),e.qZA(),e._UZ(24,"input",12),e.YNc(25,y,3,2,"div",6),e.qZA()(),e.TgZ(26,"div",2)(27,"div",3)(28,"label",13),e._uU(29,"Ip"),e.qZA(),e._UZ(30,"input",14),e.YNc(31,L,2,1,"div",6),e.qZA()(),e.TgZ(32,"div",2)(33,"div",3)(34,"label",15),e._uU(35,"Role"),e.qZA(),e.YNc(36,k,11,3,"ng-template",16),e.YNc(37,F,7,3,"ng-template",16),e.YNc(38,R,2,1,"div",6),e.qZA()(),e.TgZ(39,"div",17)(40,"button",18),e.YNc(41,V,1,0,"span",19),e._uU(42," Save "),e.qZA(),e.TgZ(43,"a",20),e._uU(44,"Cancel"),e.qZA()()()),2&i&&(e.Q6J("ngIf",r.isAddMode),e.xp6(1),e.Q6J("ngIf",!r.isAddMode),e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(5),e.Q6J("ngClass",e.VKq(19,a,r.submitted&&r.f.firstName.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.firstName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(21,a,r.submitted&&r.f.lastName.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.lastName.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(23,a,r.submitted&&r.f.username.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.username.errors),e.xp6(4),e.Q6J("ngIf",!r.isAddMode),e.xp6(1),e.Q6J("ngClass",e.VKq(25,a,r.submitted&&r.f.password.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.password.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(27,a,r.submitted&&r.f.username.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.ip.errors),e.xp6(5),e.Q6J("ngIf","director"==r.userRole),e.xp6(1),e.Q6J("ngIf","admin"==r.userRole),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.role.errors),e.xp6(2),e.Q6J("disabled",r.loading),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[l.mk,l.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,d.yS],encapsulation:2}),t})();const O=[{path:"",component:Z,children:[{path:"",component:T},{path:"add",component:_},{path:"edit/:id",component:_}]}];let B=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(O),d.Bz]}),t})(),D=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,s.UX,B]}),t})()}}]);