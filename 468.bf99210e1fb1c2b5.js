"use strict";(self.webpackChunkDistanceCalcFront=self.webpackChunkDistanceCalcFront||[]).push([[468],{4468:(z,h,a)=>{a.r(h),a.d(h,{OwnersModule:()=>R});var o=a(4719),l=a(6895),u=a(5146),e=a(5062);let _=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[u.lC],encapsulation:2}),t})();var s=a(7224),p=a(9429);function v(t,i){1&t&&e._UZ(0,"span",12)}function Z(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Delete"),e.qZA())}function A(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"table")(3,"tr",7),e._uU(4),e.qZA(),e.TgZ(5,"tr",7),e._uU(6),e.qZA()()(),e.TgZ(7,"td")(8,"table")(9,"tr",7),e._uU(10),e.qZA(),e.TgZ(11,"tr",7),e._uU(12),e.qZA()()(),e.TgZ(13,"td")(14,"table")(15,"tr",7),e._uU(16),e.qZA(),e.TgZ(17,"tr",7),e._uU(18),e.qZA()()(),e.TgZ(19,"td")(20,"table")(21,"tr",7),e._uU(22),e.qZA(),e.TgZ(23,"tr",7),e._uU(24),e.qZA(),e.TgZ(25,"tr",7),e._uU(26),e.qZA()()(),e.TgZ(27,"td",8)(28,"a",9),e._uU(29,"Edit"),e.qZA(),e.TgZ(30,"button",10),e.NdJ("click",function(){const c=e.CHM(n).$implicit,f=e.oxw();return e.KtG(f.deleteOwner(c.id))}),e.YNc(31,v,1,0,"span",11),e.YNc(32,Z,2,0,"span",6),e.qZA()()()}if(2&t){const n=i.$implicit;e.xp6(4),e.Oqu(n.ownerName),e.xp6(2),e.Oqu(n.ownerId),e.xp6(4),e.Oqu(n.companyName),e.xp6(2),e.Oqu(n.address),e.xp6(4),e.Oqu(n.phoneNumber),e.xp6(2),e.Oqu(n.homePhone),e.xp6(4),e.Oqu(n.emergencyPhone),e.xp6(2),e.Oqu(n.email),e.xp6(2),e.Oqu(n.vechileId),e.xp6(2),e.MGl("routerLink","edit/",n.id,""),e.xp6(2),e.Q6J("disabled",n.isDeleting),e.xp6(1),e.Q6J("ngIf",n.isDeleting),e.xp6(1),e.Q6J("ngIf",!n.isDeleting)}}function b(t,i){1&t&&(e.TgZ(0,"tr")(1,"td",13),e._UZ(2,"span",14),e.qZA()())}let q=(()=>{class t{constructor(n){this.ownerService=n,this.owners=null}ngOnInit(){this.ownerService.getAll().pipe((0,s.P)()).subscribe(n=>this.owners=n)}deleteOwner(n){this.owners.find(m=>m.id===n).isDeleting=!0,this.ownerService.delete(n).pipe((0,s.P)()).subscribe(()=>{this.owners=this.owners.filter(m=>m.id!==n)})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(p.Tw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:38,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","10%"],[2,"width","30%"],[2,"width","5%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"color","green"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-info","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-owner",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(n,r){1&n&&(e.TgZ(0,"h1"),e._uU(1,"Owners"),e.qZA(),e.TgZ(2,"a",0),e._uU(3,"Add Owner"),e.qZA(),e.TgZ(4,"table",1)(5,"thead")(6,"tr")(7,"th",2)(8,"table")(9,"tr"),e._uU(10,"Owner Name"),e.qZA(),e.TgZ(11,"tr"),e._uU(12,"Owner Id"),e.qZA()()(),e.TgZ(13,"th",2)(14,"table")(15,"tr"),e._uU(16,"Company Name"),e.qZA(),e.TgZ(17,"tr"),e._uU(18,"Address"),e.qZA()()(),e.TgZ(19,"th",3)(20,"table")(21,"tr"),e._uU(22,"Phone Number"),e.qZA(),e.TgZ(23,"tr"),e._uU(24,"Home Phone"),e.qZA()()(),e.TgZ(25,"th",2)(26,"table")(27,"tr"),e._uU(28,"Emergency Phone"),e.qZA(),e.TgZ(29,"tr"),e._uU(30,"Email"),e.qZA(),e.TgZ(31,"tr"),e._uU(32,"Vechile Id"),e.qZA()()(),e._UZ(33,"th",4)(34,"th",4),e.qZA()(),e.TgZ(35,"tbody"),e.YNc(36,A,33,13,"tr",5),e.YNc(37,b,3,0,"tr",6),e.qZA()()),2&n&&(e.xp6(36),e.Q6J("ngForOf",r.owners),e.xp6(1),e.Q6J("ngIf",!r.owners))},dependencies:[l.sg,l.O5,u.yS],encapsulation:2}),t})();function T(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Add Owner"),e.qZA())}function w(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Edit Owner"),e.qZA())}function C(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Owner Name is required"),e.qZA())}function I(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,C,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.ownerName.errors.required)}}function N(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Owner Id is required"),e.qZA())}function U(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,N,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.ownerId.errors.required)}}function y(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Company Name is required"),e.qZA())}function x(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,y,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.companyName.errors.required)}}function J(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Address is required"),e.qZA())}function O(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,J,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.address.errors.required)}}function Q(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Phone number is required"),e.qZA())}function E(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,Q,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.phoneNumber.errors.required)}}function P(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Home phone is required"),e.qZA())}function Y(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,P,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.homePhone.errors.required)}}function S(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Emergency phone is required"),e.qZA())}function V(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,S,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.emergencyPhone.errors.required)}}function k(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function L(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,k,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.email.errors.required)}}function M(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"VechileId"),e.qZA())}function F(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,M,2,0,"div",0),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.f.vechileId.errors.required)}}function K(t,i){1&t&&e._UZ(0,"span",28)}const d=function(t){return{"is-invalid":t}};let g=(()=>{class t{constructor(n,r,m,c,f,H){this.formBuilder=n,this.route=r,this.router=m,this.ownerService=c,this.alertService=f,this.vechileService=H,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({ownerName:["",o.kI.required],ownerId:["",o.kI.required],companyName:["",o.kI.required],address:["",o.kI.required],phoneNumber:["",o.kI.required],homePhone:["",o.kI.required],emergencyPhone:["",o.kI.required],email:["",o.kI.required],vechileId:["",o.kI.required]}),this.isAddMode||this.ownerService.getById(this.id).pipe((0,s.P)()).subscribe(n=>{this.f.ownerName.setValue(n.ownerName),this.f.ownerId.setValue(n.ownerId),this.f.companyName.setValue(n.companyName),this.f.address.setValue(n.address),this.f.phoneNumber.setValue(n.phoneNumber),this.f.homePhone.setValue(n.homePhone),this.f.emergencyPhone.setValue(n.emergencyPhone),this.f.email.setValue(n.email),this.f.vechileId.setValue(n.vechileId)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createOwner():this.updateOwner())}createOwner(){this.ownerService.register(this.form.value).pipe((0,s.P)()).subscribe(n=>{this.alertService.success("Owner added successfully",{keepAfterRouteChange:!0}),this.router.navigate([".",{relativeTo:this.route}])},n=>{this.alertService.error(n),this.loading=!1}),this.vechileService.getByVechileId(this.f.vechileId.value).pipe((0,s.P)()).subscribe(n=>{n.ownerId=this.f.ownerId.value,this.vechileService.update(n.id,n).pipe((0,s.P)()).subscribe(r=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},r=>{this.alertService.error(r),this.loading=!1})})}updateOwner(){this.ownerService.update(this.id,this.form.value).pipe((0,s.P)()).subscribe(n=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},n=>{this.alertService.error(n),this.loading=!1}),this.vechileService.getByVechileId(this.f.vechileId.value).pipe((0,s.P)()).subscribe(n=>{n.ownerId=this.f.ownerId.value,this.vechileService.update(n.id,n).pipe((0,s.P)()).subscribe(r=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},r=>{this.alertService.error(r),this.loading=!1})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.qu),e.Y36(u.gz),e.Y36(u.F0),e.Y36(p.Tw),e.Y36(p.c9),e.Y36(p.HT))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:56,vars:41,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","ownerName"],["type","text","formControlName","ownerName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","ownerId"],["type","text","formControlName","ownerId",1,"form-control",3,"ngClass"],["for","companyName"],["type","text","formControlName","companyName",1,"form-control",3,"ngClass"],["for","address"],["type","text","formControlName","address",1,"form-control",3,"ngClass"],["for","phoneNumber"],["type","text","formControlName","phoneNumber",1,"form-control",3,"ngClass"],["for","homePhone"],["type","text","formControlName","homePhone",1,"form-control",3,"ngClass"],["for","emergencyPhone"],["type","text","formControlName","emergencyPhone",1,"form-control",3,"ngClass"],["for","email"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["for","vechileId"],["type","text","formControlName","vechileId",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/owners",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(n,r){1&n&&(e.YNc(0,T,2,0,"h1",0),e.YNc(1,w,2,0,"h1",0),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"div",2)(4,"div",3)(5,"label",4),e._uU(6,"Owner Name"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,I,2,1,"div",6),e.qZA(),e.TgZ(9,"div",3)(10,"label",7),e._uU(11,"Owner Id"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,U,2,1,"div",6),e.qZA(),e.TgZ(14,"div",3)(15,"label",9),e._uU(16,"Company Name"),e.qZA(),e._UZ(17,"input",10),e.YNc(18,x,2,1,"div",6),e.qZA(),e.TgZ(19,"div",3)(20,"label",11),e._uU(21,"Address"),e.qZA(),e._UZ(22,"input",12),e.YNc(23,O,2,1,"div",6),e.qZA(),e.TgZ(24,"div",3)(25,"label",13),e._uU(26,"Phone Number"),e.qZA(),e._UZ(27,"input",14),e.YNc(28,E,2,1,"div",6),e.qZA()(),e.TgZ(29,"div",2)(30,"div",3)(31,"label",15),e._uU(32,"Home Phone"),e.qZA(),e._UZ(33,"input",16),e.YNc(34,Y,2,1,"div",6),e.qZA(),e.TgZ(35,"div",3)(36,"label",17),e._uU(37,"Emergency Phone"),e.qZA(),e._UZ(38,"input",18),e.YNc(39,V,2,1,"div",6),e.qZA(),e.TgZ(40,"div",3)(41,"label",19),e._uU(42,"Email"),e.qZA(),e._UZ(43,"input",20),e.YNc(44,L,2,1,"div",6),e.qZA(),e.TgZ(45,"div",3)(46,"label",21),e._uU(47,"Vechile Id"),e.qZA(),e._UZ(48,"input",22),e.YNc(49,F,2,1,"div",6),e.qZA()(),e.TgZ(50,"div",23)(51,"button",24),e.YNc(52,K,1,0,"span",25),e._uU(53," Save "),e.qZA(),e.TgZ(54,"a",26),e._uU(55,"Cancel"),e.qZA()()()),2&n&&(e.Q6J("ngIf",r.isAddMode),e.xp6(1),e.Q6J("ngIf",!r.isAddMode),e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(5),e.Q6J("ngClass",e.VKq(23,d,r.submitted&&r.f.ownerName.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.ownerName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(25,d,r.submitted&&r.f.ownerId.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.ownerId.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(27,d,r.submitted&&r.f.companyName.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.companyName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(29,d,r.submitted&&r.f.address.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.address.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(31,d,r.submitted&&r.f.phoneNumber.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.phoneNumber.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(33,d,r.submitted&&r.f.homePhone.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.homePhone.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(35,d,r.submitted&&r.f.emergencyPhone.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.emergencyPhone.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(37,d,r.submitted&&r.f.email.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.email.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(39,d,r.submitted&&r.f.vechileId.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.vechileId.errors),e.xp6(2),e.Q6J("disabled",r.loading),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[l.mk,l.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,u.yS],encapsulation:2}),t})();const B=[{path:"",component:_,children:[{path:"",component:q},{path:"add",component:g},{path:"edit/:id",component:g}]}];let D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(B),u.Bz]}),t})(),R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,o.UX,D]}),t})()}}]);