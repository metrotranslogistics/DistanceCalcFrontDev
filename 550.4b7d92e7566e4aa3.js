"use strict";(self.webpackChunkDistanceCalcFront=self.webpackChunkDistanceCalcFront||[]).push([[550],{4550:(K,m,i)=>{i.r(m),i.d(m,{CategoriesModule:()=>E});var c=i(4719),p=i(6895),g=i(5146),e=i(5062);let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-1"],[1,"container"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()())},dependencies:[g.lC],encapsulation:2}),n})();var y=i(9671),r=i(7224),u=i(805),h=i(9429),v=i(793),C=i(666),f=i(1383);function T(n,s){1&n&&(e.TgZ(0,"div",5),e._UZ(1,"i",6),e.TgZ(2,"div"),e._uU(3,"Updating ratings..."),e.qZA()())}function Z(n,s){1&n&&(e.TgZ(0,"th"),e._uU(1,"Vehicle Id"),e.qZA(),e.TgZ(2,"th"),e._uU(3,"Category"),e.qZA())}function L(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr",12)(1,"td")(2,"input",13),e.NdJ("ngModelChange",function(a){const d=e.CHM(t).$implicit;return e.KtG(d.isChecked=a)}),e.qZA(),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()()}if(2&n){const t=s.$implicit;e.Q6J("pSelectableRow",t),e.xp6(2),e.s9C("name",t.vechileId),e.s9C("id",t.vechileId),e.Q6J("ngModel",t.isChecked),e.xp6(1),e.hij(" ",t.vechileId,""),e.xp6(2),e.hij(" ",t.category," ")}}function M(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"p-table",8,9),e.NdJ("selectionChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedVechile=a)}),e.YNc(3,Z,4,0,"ng-template",10),e.YNc(4,L,6,6,"ng-template",11),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("value",t.vechiles)("selection",t.selectedVechile)}}const x=[{path:"",component:A,children:[{path:"",component:(()=>{class n{constructor(t,o,a,l,d,H){this.vechileService=t,this.messageService=o,this.accountService=a,this.intervalConfigService=l,this.router=d,this.route=H,this.categories=[],this.selectedCategory=[],this.userName="",this.userRole="",this.vechIds=[],this.loading=!1}setLoading(t){this.loading=t}getLoading(){return this.loading}get values(){return this.vechIds=this.vechiles.filter(t=>t.isChecked).map(t=>t.vechileId),this.vechIds}ngOnInit(){this.setLoading(!0),this.categories=[],this.intervalConfigService.getAll().pipe((0,r.P)()).subscribe(t=>this.intervalConfig=t),this.accountService.getById(this.accountService.userValue.id).pipe((0,r.P)()).subscribe(t=>{this.userRole=t.role,this.userName=t.firstName,this.vechileService.getAll().pipe((0,r.P)()).subscribe(o=>{this.vechiles=o;for(let l=0;l<this.vechiles.length;l++)this.categories.findIndex(d=>d==this.vechiles[l].category)<=-1&&this.categories.push(this.vechiles[l].category)})}),this.setLoading(!1)}onChange(t,o){this.vechileService.update(t,o).pipe((0,r.P)()).subscribe()}assignCategories(){var t=this;return(0,y.Z)(function*(){t.setLoading(!0);for(let o=0;o<t.vechIds.length;o++)yield t.vechileService.getByVechileId(t.vechIds[o]).pipe((0,r.P)()).subscribe(a=>{a.category=t.selectedCategory,t.vechileService.update(a.id,a).pipe((0,r.P)()).subscribe()});yield new Promise(o=>setTimeout(o,4e3)),yield t.vechileService.getAll().pipe((0,r.P)()).subscribe(o=>t.vechiles=o),t.setLoading(!1)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.HT),e.Y36(u.ez),e.Y36(h.BR),e.Y36(h.cY),e.Y36(g.F0),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([u.ez,p.uU])],decls:14,vars:7,consts:[[1,"p-toolbar-group-left"],[3,"options","ngModel","ngModelChange"],[1,"text-danger",3,"click"],["class","text-center",4,"ngIf"],["class","card",4,"ngIf"],[1,"text-center"],[1,"fa","fa-spinner","fa-spin","fa-3x","fa-fw"],[1,"card"],["selectionMode","single","dataKey","id",1,"table","table-striped","table-hover",3,"value","selection","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],[3,"pSelectableRow"],["type","checkbox",3,"ngModel","name","id","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"p-toolbar")(1,"div",0),e._uU(2,"\xa0 \xa0 \xa0 \xa0 "),e.TgZ(3,"label"),e._uU(4,"Assign category to groups"),e.qZA(),e._uU(5,"\xa0 \xa0 \xa0 \xa0 "),e.TgZ(6,"p-dropdown",1),e.NdJ("ngModelChange",function(l){return o.selectedCategory=l}),e.qZA(),e._uU(7," \xa0 \xa0 \xa0 \xa0 "),e.TgZ(8,"a",2),e.NdJ("click",function(){return o.assignCategories()}),e._uU(9,"Update"),e.qZA(),e._uU(10),e.ALo(11,"json"),e.qZA()(),e.YNc(12,T,4,0,"div",3),e.YNc(13,M,5,2,"div",4)),2&t&&(e.xp6(6),e.Q6J("options",o.categories)("ngModel",o.selectedCategory),e.xp6(4),e.hij(" \xa0 \xa0 \xa0 \xa0 ",e.lcZ(11,5,o.values)," "),e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading))},dependencies:[p.O5,c.Wl,c.JJ,v.iA,u.jx,v.Ei,C.Lt,c.On,f.o,p.Ts],encapsulation:2}),n})()}]}];let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(x),g.Bz]}),n})();var U=i(9483),J=i(9549),S=i(4144),N=i(3238),Y=i(6308),F=i(5415),j=i(2453),B=i(585),P=i(8177),R=i(5722),V=i(4076),b=i(1493),z=i(5593),Q=i(8235),X=i(1740);let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,c.UX,I,U.FA,J.lN,S.c,N.XK,Y.JX,F.T,v.U$,C.kW,j.EV,B._8,P.JH,R.q4,V.vI,b.S,z.hJ,Q.q,X.j,c.u5,f.V]}),n})()}}]);